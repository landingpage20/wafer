<!DOCTYPE html>
<html lang="it">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>The Aurum Store</title>
Â  <style>
Â Â Â  * { margin:0; padding:0; box-sizing:border-box; }
Â Â Â  body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height:100vh; padding:20px; }
Â Â Â  .container { max-width:1200px; margin:0 auto; background:white; border-radius:20px; padding:40px; box-shadow:0 20px 60px rgba(0,0,0,0.3); }
Â Â Â  h1 { text-align:center; color:#333; margin-bottom:10px; font-size:2.5em; }
Â Â Â  .subtitle { text-align:center; color:#666; margin-bottom:40px; font-size:1.1em; }
Â Â Â  .user-id-display { background:#f0f0f0; padding:10px 20px; border-radius:8px; text-align:center; margin-bottom:30px; font-size:0.9em; color:#666; }
Â Â Â  .products-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; margin-bottom:40px; }
Â Â Â  .product-card { background:white; border:2px solid #e0e0e0; border-radius:15px; padding:25px; transition:all 0.3s ease; cursor:pointer; }
Â Â Â  .product-card:hover { transform:translateY(-5px); box-shadow:0 10px 30px rgba(0,0,0,0.15); border-color:#667eea; }
Â Â Â  .product-image { width:100%; height:200px; background:#f5f5f5; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:4em; margin-bottom:20px; overflow:hidden; position:relative; padding:10px; }
Â Â Â  .product-image img { max-width:100%; max-height:100%; object-fit:contain; display:block; }
Â Â Â  .product-image .emoji-fallback { font-size:4em; }
Â Â Â  .product-name { font-size:1.4em; font-weight:bold; color:#333; margin-bottom:10px; }
Â Â Â  .product-description { color:#666; margin-bottom:15px; line-height:1.5; }
Â Â Â  .product-price { font-size:1.5em; color:#667eea; font-weight:bold; margin-bottom:15px; }
Â Â Â  .btn-add-cart { width:100%; padding:12px; background:#667eea; color:white; border:none; border-radius:8px; font-size:1em; font-weight:bold; cursor:pointer; transition:all 0.3s ease; }
Â Â Â  .btn-add-cart:hover { background:#5568d3; transform:scale(1.02); }
Â Â Â  .btn-add-cart.added { background:#48bb78; }
Â Â Â  .cart-summary { background:#f8f9fa; padding:25px; border-radius:15px; margin-bottom:30px; }
Â Â Â  .cart-summary h2 { color:#333; margin-bottom:15px; }
Â Â Â  .cart-item { display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid #e0e0e0; }
Â Â Â  .cart-total { font-size:1.5em; font-weight:bold; color:#667eea; margin-top:15px; text-align:right; }
Â Â Â  .empty-cart { text-align:center; color:#999; padding:20px; }
Â  </style>
</head>
<body>
Â  <div class="container">
Â Â Â  <h1>The Aurum Store</h1>
Â Â Â  <p class="subtitle"> </p>
Â Â Â  <div class="user-id-display" id="userIdDisplay"> Loading user ID...</div>
Â 
Â Â Â  <div class="cart-summary">
Â Â Â Â Â  <h2>ðŸ›’ Cart</h2>
Â Â Â Â Â  <div id="cartItems" class="empty-cart">Your cart is empty</div>
Â Â Â Â Â  <div class="cart-total" id="cartTotal"></div>
Â Â Â  </div>
Â 
Â Â Â  <div class="products-grid" id="productsGrid"></div>
Â  </div>
Â 
Â  <script>
Â Â Â  const products = [
Â Â Â Â Â  { id:1, name: 'Tre Marie Nougal', price:1.5, emoji:'ðŸª', description:'100% Natural Ingredients', image:'https://m.media-amazon.com/images/I/61ZxIMuE9UL._AC_SL1500_.jpg'},
Â Â Â Â Â  { id:2, name: 'Tre Marie Hazelnut', price:1.5, emoji:'ðŸª', description: 'https://tremarie.galbusera.it/wp-content/uploads/2021/09/Wafer_3MARIE_Nocciola-175g_071122.png'},
Â Â Â Â Â  { id:3, name: 'Tre Marie Migdal', price:1.5, emoji:'ðŸª', description: '100% Natural Ingredients', image:'https://tremarie.galbusera.it/wp-content/uploads/2021/09/Wafer_3MARIE_Mandorlato-140g_071122.png'},
Â Â Â Â Â  { id:4, name: 'Tre Marie Avel', price:1.5, emoji:'ðŸª', description: 'No Chemical Additives', image:'https://m.media-amazon.com/images/I/61pMd6pzFEL._AC_SL1500_.jpg '},
Â Â Â Â Â  { id:5, name: 'Tre Marie Migdal', price:3.5, emoji:'ðŸª', description: '100% Natural Ingredientsâ€™, image:'https://m.media-amazon.com/images/I/61ThXucaFCL._AC_SL1146_.jpg'},
Â Â Â Â Â  { id:6, name: 'Tre Marie Avel', price:1.5, emoji:'ðŸª', description: 'No Chemical Additives', image:'https://tremarie.galbusera.it/wp-content/uploads/2021/09/Wafer_3MARIE_Nocciolato-140g_071122.png'}
Â Â Â Â Â  { id:7, name: 'Tre Marie Hazelnut', price:1.5, emoji:'ðŸª', description: '100% Natural Ingredientsâ€™, image:'https://tremarie.galbusera.it/wp-content/uploads/2021/09/Wafer_3MARIE_Stracciatella-140g_071122.png'},
Â Â Â Â Â  { id:8, name:'Tre Marie Nougal', price:1.5, emoji:'ðŸª', description: 'No Chemical Additivesâ€™, image:' https://www.dolciricorrenze.it/products/wafer-stracciatella-ancora-uno-tre-marie?pr_prod_strat=jac&pr_rec_id=e9872bffe&pr_rec_pid=8625056776528&pr_ref_pid=8625056973136&pr_seq=uniform'}
Â Â Â  ];
Â 
Â Â Â  let userId = null;
Â Â Â  let cart = [];
Â Â Â  let sessionStart = Date.now();
Â Â Â  const trackingData = [];
Â 
Â Â Â  // Link Web App con foglio "Tracking wafer"
Â Â Â  const GOOGLE_SHEETS_URL = 'https://script.google.com/macros/s/AKfycbz3kSaKG6a1Vg2Nn2lx20jQSHQLp0Uy9EF5gAZLFrQKp7vSR4WfackGGL5F1P7MaucELA/exec';
Â 
Â Â Â  function getUserIdFromURL() {
Â Â Â Â Â  const params = new URLSearchParams(window.location.search);
Â Â Â Â Â  return params.get('uid') || params.get('user_id') || params.get('PROLIFIC_PID') || 'DEMO_' + Date.now();
Â Â Â  }
Â 
Â Â Â  function sendToGoogleSheets(event) {
Â Â Â Â Â  fetch(GOOGLE_SHEETS_URL, {
Â Â Â Â Â Â Â  method: 'POST',
Â Â Â Â Â Â Â  mode: 'no-cors',
Â Â Â Â Â Â Â  headers: { 'Content-Type': 'application/json' },
Â Â Â Â Â Â Â  body: JSON.stringify(event)
Â Â Â Â Â  }).catch(console.error);
Â Â Â  }
Â 
Â Â Â  function trackEvent(type, productId=null, productPrice=null) {
Â Â Â Â Â  const timestamp = new Date().toLocaleString('it-IT', { hour12:false });
Â Â Â Â Â  const event = {
Â Â Â Â Â Â Â  timestamp,
Â Â Â Â Â Â Â  userId,
Â Â Â Â Â Â Â  eventType: type,
Â Â Â Â Â Â Â  productId,
Â Â Â Â Â Â Â  productName: productId ? products.find(p=>p.id===productId).name : null,
Â Â Â Â Â Â Â  productPrice,
Â Â Â Â Â Â Â  sessionDuration: Math.floor((Date.now()-sessionStart)/1000)
Â Â Â Â Â  };
Â Â Â Â Â  trackingData.push(event);
Â Â Â Â Â  console.log('Tracked:', event);
Â Â Â Â Â  sendToGoogleSheets(event);
Â Â Â  }
Â 
Â Â Â  function renderProducts() {
Â Â Â Â Â  const grid = document.getElementById('productsGrid');
Â Â Â Â Â  grid.innerHTML = products.map(p => {
Â Â Â Â Â Â Â  const imgHTML = p.image ? `<img src="${p.image}" alt="${p.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"><div class="emoji-fallback" style="display:none;">${p.emoji}</div>` : `<div class="emoji-fallback">${p.emoji}</div>`;
Â Â Â Â Â Â Â  return `
Â Â Â Â Â Â Â Â Â  <div class="product-card" onclick="viewProduct(${p.id})">
Â Â Â Â Â Â Â Â Â Â Â  <div class="product-image">${imgHTML}</div>
Â Â Â Â Â Â Â Â Â Â Â  <div class="product-name">${p.name}</div>
Â Â Â Â Â Â Â Â Â Â Â  <div class="product-description">${p.description}</div>
Â Â Â Â Â Â Â Â Â Â Â  <div class="product-price">$${p.price.toFixed(2)}</div>
Â Â Â Â Â Â Â Â Â Â Â  <button class="btn-add-cart" onclick="addToCart(event, ${p.id})" id="btn-${p.id}">ADD TO CART</button>
Â Â Â Â Â Â Â Â Â  </div>`;
Â Â Â Â Â  }).join('');
Â Â Â  }
Â Â Â  function viewProduct(id) {
Â Â Â Â Â  trackEvent('product_view', id, products.find(p => p.id === id).price);
Â Â Â  }
Â 
Â Â Â  function addToCart(event, id) {
Â Â Â Â Â  event.stopPropagation();
Â Â Â Â Â  const product = products.find(p => p.id === id);
Â Â Â Â Â  const existing = cart.find(i => i.id === id);
Â Â Â Â Â  if(existing) existing.quantity++;
Â Â Â Â Â  else cart.push({...product, quantity:1});
Â Â Â Â Â  trackEvent('add_to_cart', id, product.price);
Â Â Â Â Â  updateCart();
Â Â Â Â Â  const btn = document.getElementById(`btn-${id}`);
Â Â Â Â Â  btn.classList.add('added');
Â Â Â Â Â  btn.textContent = 'âœ“ Added to Cart';
Â Â Â Â Â  setTimeout(() => {
Â Â Â Â Â Â Â  btn.classList.remove('added');
Â Â Â Â Â Â Â  btn.textContent = 'ADD TO CART';
Â Â Â Â Â  }, 1500);
Â Â Â  }
Â 
Â Â Â  function updateCart() {
Â Â Â Â Â  const div = document.getElementById('cartItems');
Â Â Â Â Â  const totalDiv = document.getElementById('cartTotal');
Â Â Â Â Â  if(cart.length === 0){
Â Â Â Â Â Â Â  div.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
Â Â Â Â Â Â Â  totalDiv.textContent = '';
Â Â Â Â Â Â Â  return;
Â Â Â Â Â  }
Â Â Â Â Â  div.innerHTML = cart.map(item =>
Â Â Â Â Â Â Â  `<div class="cart-item"><span>${item.name} x${item.quantity}</span><span>$${(item.price*item.quantity).toFixed(2)}</span></div>`
Â Â Â Â Â  ).join('');
Â Â Â Â Â  const total = cart.reduce((sum,i) => sum + i.price*i.quantity, 0);
Â Â Â Â Â  totalDiv.textContent = `Total: $${total.toFixed(2)}`;
Â Â Â  }
Â 
Â Â Â  function init() {
Â Â Â Â Â  userId = getUserIdFromURL();
Â Â Â Â Â  document.getElementById('userIdDisplay').textContent = `User ID: ${userId}`;
Â Â Â Â Â  trackEvent('session_start');
Â Â Â Â Â  renderProducts();
Â Â Â Â Â  updateCart();
Â Â Â  }
Â 
Â Â Â  window.addEventListener('beforeunload', () => trackEvent('session_end'));
Â 
Â Â Â  init();
Â  </script>
</body>
</html>
